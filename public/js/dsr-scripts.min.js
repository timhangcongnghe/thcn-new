!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=88)}({4:function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=r=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},70:function(t,e,r){},88:function(t,e,r){"use strict";r.r(e);r(70);var n,o,a,i,s=r(4),l=r.n(s);!function(t){function e(t,e,r){return t===e?t=e:t===r&&(t=r),t}function r(t){return void 0!==t}function n(t,e,r){var n=r/100*(e-t);return 1===(n=Math.round(t+n).toString(16)).length&&(n="0"+n),n}function o(t,e,o){if(!t||!e)return null;o=r(o)?o:0,t=p(t),e=p(e);var a=n(t.r,e.r,o),i=n(t.b,e.b,o);return"#"+a+n(t.g,e.g,o)+i}function a(n,i){function s(t){r(t)||(t=i.rating),N=t;var e=t/W,n=e*A;e>1&&(n+=(Math.ceil(e)-1)*U),g(i.ratedFill),B.css("width",n+"%")}function l(){Y=T*i.numStars+R*(i.numStars-1),A=T/Y*100,U=R/Y*100,n.width(Y),s()}function c(t){var e=i.starWidth=t;return T=window.parseFloat(i.starWidth.replace("px","")),Q.find("svg").attr({width:i.starWidth,height:e}),B.find("svg").attr({width:i.starWidth,height:e}),l(),n}function f(t){return i.spacing=t,R=parseFloat(i.spacing.replace("px","")),Q.find("svg:not(:first-child)").css({"margin-left":t}),B.find("svg:not(:first-child)").css({"margin-left":t}),l(),n}function p(t){return i.normalFill=t,Q.find("svg").attr({fill:i.normalFill}),n}function g(t){if(i.multiColor){var e=(N-D)/i.maxValue*100,r=i.multiColor||{};t=o(r.startColor||d.startColor,r.endColor||d.endColor,e)}else $=t;return i.ratedFill=t,B.find("svg").attr({fill:i.ratedFill}),n}function h(t){i.multiColor=t,g(t||$)}function v(e){i.numStars=e,W=i.maxValue/i.numStars,Q.empty(),B.empty();for(var r=0;r<i.numStars;r++)Q.append(t(u)),B.append(t(u));return c(i.starWidth),p(i.normalFill),f(i.spacing),s(),n}function m(t){return i.maxValue=t,W=i.maxValue/i.numStars,i.rating>t&&S(t),s(),n}function y(t){return i.precision=t,S(i.rating),n}function b(t){return i.halfStar=t,n}function w(t){return i.fullStar=t,n}function x(t){var e=Q.offset().left,r=e+Q.width(),n=i.maxValue,o=t.pageX,a=0;if(e>o)a=D;else if(o>r)a=n;else{var s=(o-e)/(r-e);if(R>0)for(var l=s*=100;l>0;)l>A?(a+=W,l-=A+U):(a+=l/A*W,l=0);else a=s*i.maxValue;a=function(t){var e=t%W,r=W/2,n=i.halfStar,o=i.fullStar;return o||n?(o||n&&e>r?t+=W-e:(t-=e,e>0&&(t+=r)),t):t}(a)}return a}function k(t){return i.readOnly=t,n.attr("readonly",!0),P(),t||(n.removeAttr("readonly"),n.on("mousemove",F).on("mouseenter",F).on("mouseleave",M).on("click",O).on("rateyo.init",I).on("rateyo.change",V).on("rateyo.set",E)),n}function S(t){var r=t,o=i.maxValue;return"string"==typeof r&&("%"===r[r.length-1]&&(r=r.substr(0,r.length-1),m(o=100)),r=parseFloat(r)),function(t,e,r){if(!(t>=e&&r>=t))throw Error("Invalid Rating, expected value between "+e+" and "+r)}(r,D,o),r=parseFloat(r.toFixed(i.precision)),e(parseFloat(r),D,o),i.rating=r,s(),X&&n.trigger("rateyo.set",{rating:r}),n}function _(t){return i.onInit=t,n}function C(t){return i.onSet=t,n}function j(t){return i.onChange=t,n}function F(t){var r=x(t).toFixed(i.precision),o=i.maxValue;s(r=e(parseFloat(r),D,o)),n.trigger("rateyo.change",{rating:r})}function M(){s(),n.trigger("rateyo.change",{rating:i.rating})}function O(t){var e=x(t).toFixed(i.precision);e=parseFloat(e),q.rating(e)}function I(t,e){i.onInit&&"function"==typeof i.onInit&&i.onInit.apply(this,[e.rating,q])}function V(t,e){i.onChange&&"function"==typeof i.onChange&&i.onChange.apply(this,[e.rating,q])}function E(t,e){i.onSet&&"function"==typeof i.onSet&&i.onSet.apply(this,[e.rating,q])}function P(){n.off("mousemove",F).off("mouseenter",F).off("mouseleave",M).off("click",O).off("rateyo.init",I).off("rateyo.change",V).off("rateyo.set",E)}this.node=n.get(0);var q=this;n.empty().addClass("jq-ry-container");var W,T,A,R,U,Y,z=t("<div/>").addClass("jq-ry-group-wrapper").appendTo(n),Q=t("<div/>").addClass("jq-ry-normal-group").addClass("jq-ry-group").appendTo(z),B=t("<div/>").addClass("jq-ry-rated-group").addClass("jq-ry-group").appendTo(z),D=0,N=i.rating,X=!1,$=i.ratedFill;this.rating=function(t){return r(t)?(S(t),n):i.rating},this.destroy=function(){return i.readOnly||P(),a.prototype.collection=function(e,r){return t.each(r,(function(t){if(e===this.node){var n=r.slice(0,t),o=r.slice(t+1,r.length);return r=n.concat(o),!1}})),r}(n.get(0),this.collection),n.removeClass("jq-ry-container").children().remove(),n},this.method=function(t){if(!t)throw Error("Method name not specified!");if(!r(this[t]))throw Error("Method "+t+" doesn't exist!");var e=Array.prototype.slice.apply(arguments,[]),n=e.slice(1),o=this[t];return o.apply(this,n)},this.option=function(t,e){if(!r(t))return i;var n;switch(t){case"starWidth":n=c;break;case"numStars":n=v;break;case"normalFill":n=p;break;case"ratedFill":n=g;break;case"multiColor":n=h;break;case"maxValue":n=m;break;case"precision":n=y;break;case"rating":n=S;break;case"halfStar":n=b;break;case"fullStar":n=w;break;case"readOnly":n=k;break;case"spacing":n=f;break;case"onInit":n=_;break;case"onSet":n=C;break;case"onChange":n=j;break;default:throw Error("No such option as "+t)}return r(e)?n(e):i[t]},v(i.numStars),k(i.readOnly),this.collection.push(this),this.rating(i.rating,!0),X=!0,n.trigger("rateyo.init",{rating:i.rating})}function i(e,r){var n;return t.each(r,(function(){return e===this.node?(n=this,!1):void 0})),n}function s(e){var r=a.prototype.collection,n=t(this);if(0===n.length)return n;var o=Array.prototype.slice.apply(arguments,[]);if(0===o.length)e=o[0]={};else{if(1!==o.length||"object"!=l()(o[0])){if(o.length>=1&&"string"==typeof o[0]){var s=o[0],u=o.slice(1),d=[];return t.each(n,(function(t,e){var n=i(e,r);if(!n)throw Error("Trying to set options before even initialization");var o=n[s];if(!o)throw Error("Method "+s+" does not exist!");var a=o.apply(n,u);d.push(a)})),d=1===d.length?d[0]:d}throw Error("Invalid Arguments")}e=o[0]}return e=t.extend({},c,e),t.each(n,(function(){return i(this,r)?void 0:new a(t(this),t.extend({},e))}))}var u='<?xml version="1.0" encoding="utf-8"?><svg version="1.1"xmlns="http://www.w3.org/2000/svg"viewBox="0 12.705 512 486.59"x="0px" y="0px"xml:space="preserve"><polygon points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/></svg>',c={starWidth:"32px",normalFill:"gray",ratedFill:"#f39c12",numStars:5,maxValue:5,precision:1,rating:0,fullStar:!1,halfStar:!1,readOnly:!1,spacing:"0px",multiColor:null,onInit:null,onChange:null,onSet:null},d={startColor:"#c0392b",endColor:"#f1c40f"},f=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,p=function(t){if(!f.test(t))return null;var e=f.exec(t);return{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}};a.prototype.collection=[],window.RateYo=a,t.fn.rateYo=function(){return s.apply(this,Array.prototype.slice.apply(arguments,[]))}}(window.jQuery),n=jQuery,o=n(".dokan-review-wrapper"),a="dokan_store_rating_ajax_handler",i={init:function(){o.on("click","button.add-review-btn",this.popUp.show),o.on("click","button.edit-review-btn",this.popUp.showEdit),n("body").on("submit","#dokan-add-review-form",this.popUp.submitReview)},popUp:{show:function(t){var e={action:a,data:"review_form",store_id:n("button.add-review-btn").data("store_id")};n.post(dokan.ajaxurl,e,(function(t){1==t.success?n.magnificPopup.open({items:{src:'<div class="white-popup dokan-seller-rating-add-wrapper"><div id="ds-error-msg" ></div>'+t.data+"</div>",type:"inline"}}):alert("failed")}))},showEdit:function(t){var e={action:a,data:"edit_review_form",store_id:n("button.edit-review-btn").data("store_id"),post_id:n("button.edit-review-btn").data("post_id")};n.post(dokan.ajaxurl,e,(function(t){1==t.success?n.magnificPopup.open({items:{src:'<div class="white-popup dokan-seller-rating-add-wrapper"><div id="ds-error-msg" ></div>'+t.data+"</div>",type:"inline"}}):alert("failed")}))},submitReview:function(t){t.preventDefault();var e=n(this),r={action:a,data:"submit_review",store_id:n("button.add-review-btn").data("store_id"),rating:n("#dokan-seller-rating").rateYo("rating"),form_data:e.serialize()},o=n("#ds-error-msg");n.post(dokan.ajaxurl,r,(function(t){1==t.success?(n.magnificPopup.close(),n.magnificPopup.open({items:{src:'<div class="white-popup dokan-seller-rating-add-wrapper dokan-alert dokan-alert-success">'+t.msg+"</div>",type:"inline"}}),location.reload()):0==t.success?(o.removeClass("dokan-hide"),o.html(t.msg),o.addClass("dokan-alert dokan-alert-danger")):alert("failed")}))}}},n((function(){i.init()}))}});